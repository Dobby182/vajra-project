<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Food Products - Vajra Naturals</title>

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../images/vajralogo.png"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;600&family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Main CSS -->
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <div class="top-banner">Get extra 10% off on your first order</div>

    <script src="/js/site.js"></script>

    <header>
      <nav class="navbar">
        <div class="navbar-left">
          <h1 class="playfair-font">vajra</h1>
          <div class="nav-links">
            <a href="../index.html">HOME</a>
            <a href="../products.html">PRODUCTS</a>
            <div class="dropdown">
              <a href="#">CATEGORIES</a>
              <div class="dropdown-content">
                <a href="/category/hair.html">HAIR</a>
                <a href="/category/skin.html">SKIN</a>
                <a href="/category/food.html" class="active">FOOD</a>
              </div>
            </div>
            <a href="../reviews.html">REVIEWS</a>
            <a href="../contact.html">CONTACT</a>
          </div>
        </div>

        <div class="navbar-right-group">
          <form class="search-bar">
            <i class="fa fa-search"></i>
            <input type="text" required />
          </form>

          <div class="navbar-icons">
            <a href="../wishlist.html"><i class="far fa-heart"></i></a>
            <a href="../cart.html"><i class="fas fa-shopping-cart"></i></a>
            <a href="../login.html"><i class="far fa-user-circle"></i></a>
          </div>
        </div>
      </nav>
    </header>

    <h2 class="category-title">Food Products</h2>

    <div class="category-container">
      <!-- Product 1 -->
      <div class="category-card">
        <img src="../images/health mix powder .jpeg" alt="Health Mix Powder" />
        <h3>Health Mix Powder</h3>
        <div class="ratings">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)</div>
        <p>‚Çπ250 <span class="old-price">‚Çπ300</span></p>
        <div class="quantity-selector">
          <button class="decrease">-</button>
          <input type="number" value="1" min="1" />
          <button class="increase">+</button>
        </div>
        <div class="actions">
          <button class="add-to-cart">Add to Cart</button>
          <button class="like-btn">ü§ç</button>
        </div>
      </div>

      <!-- Product 2 -->
      <div class="category-card">
        <img src="../images/wegiht loss.jpeg" alt="Weight Loss Powder" />
        <h3>Weight Loss Powder</h3>
        <div class="ratings">‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)</div>
        <p>‚Çπ300 <span class="old-price">‚Çπ350</span></p>
        <div class="quantity-selector">
          <button class="decrease">-</button>
          <input type="number" value="1" min="1" />
          <button class="increase">+</button>
        </div>
        <div class="actions">
          <button class="add-to-cart">Add to Cart</button>
          <button class="like-btn">ü§ç</button>
        </div>
      </div>

      <!-- ‚≠ê NEW PRODUCT 3 ‚Äî IDLY PODI ‚≠ê -->
      <div class="category-card">
        <img src="../images/idlypodi.jpeg" alt="Idly Podi" />
        <h3>Idly Podi</h3>
        <div class="ratings">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)</div>
        <p>‚Çπ180 <span class="old-price">‚Çπ220</span></p>
        <div class="quantity-selector">
          <button class="decrease">-</button>
          <input type="number" value="1" min="1" />
          <button class="increase">+</button>
        </div>
        <div class="actions">
          <button class="add-to-cart">Add to Cart</button>
          <button class="like-btn">ü§ç</button>
        </div>
      </div>
    </div>

    <div class="no-results" id="no-results">No products found</div>

    <script>
      // ADD TO CART FUNCTION
      document.querySelectorAll(".category-card").forEach((card) => {
        const addBtn = card.querySelector(".add-to-cart");

        addBtn.addEventListener("click", () => {
          const name = card.querySelector("h3").textContent;
          const price = parseInt(
            card.querySelector("p").textContent.replace("‚Çπ", "")
          );
          const oldPrice = card
            .querySelector(".old-price")
            .textContent.replace("‚Çπ", "");
          // normalize image path for reliable display in cart
          const imgAttr = card.querySelector("img")?.getAttribute("src") || "";
          function normalizeImg(src) {
            if (!src) return "";
            if (
              src.startsWith("http") ||
              src.startsWith("//") ||
              src.startsWith("/")
            )
              return src;
            while (src.startsWith("../")) src = src.slice(3);
            if (src.startsWith("./")) src = src.slice(2);
            if (!src.startsWith("/")) src = "/" + src;
            return src;
          }
          const img = normalizeImg(imgAttr);
          const quantity = parseInt(card.querySelector("input").value);
          // ratings: use visible rating if present, otherwise generate simple random 4.0-5.0
          let ratings = card.querySelector(".ratings")?.textContent || "";
          if (!ratings) {
            const val = (4 + Math.random()).toFixed(1);
            ratings = `${val}/5`;
          }

          let cart = JSON.parse(localStorage.getItem("cart")) || [];

          // Check if item already in cart
          let existing = cart.find((item) => item.name === name);

          if (existing) {
            existing.quantity += quantity;
          } else {
            cart.push({
              name,
              price,
              oldPrice,
              img,
              quantity,
              ratings,
            });
          }

          localStorage.setItem("cart", JSON.stringify(cart));
          alert("Added to cart!");
        });
      });
    </script>
    <script>
      // Search wiring for category page
      const searchForm = document.querySelector(".search-bar");
      if (searchForm) {
        const searchInput = searchForm.querySelector("input");
        const noResultsEl = document.getElementById("no-results");

        function runSearchAndShow(q) {
          const visible = window.__site.searchProducts(
            q,
            ".category-container"
          );
          if (noResultsEl) noResultsEl.classList.toggle("show", visible === 0);
        }

        searchForm.addEventListener("submit", (e) => {
          e.preventDefault();
          runSearchAndShow((searchInput.value || "").trim());
        });

        searchInput.addEventListener("input", (e) => {
          runSearchAndShow(e.target.value || "");
        });

        const icon = searchForm.querySelector("i");
        if (icon) icon.addEventListener("click", () => searchInput.focus());
      }
    </script>
    </script>
    <footer class="site-footer">¬© VAJRA NATURALS</footer>
  </body>
</html>
